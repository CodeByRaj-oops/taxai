<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TaxSage 2025 | Indian Tax Consultation System</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.css">
  <style>
    :root {
      --primary: #4f46e5;
      --primary-dark: #4338ca;
      --primary-light: #e0e7ff;
      --primary-bg: #f5f7ff;
      --secondary: #10b981;
      --secondary-dark: #059669;
      --secondary-light: #d1fae5;
      --accent: #f97316;
      --text: #1e293b;
      --text-light: #64748b;
      --background: #ffffff;
      --background-alt: #f8fafc;
      --border: #e2e8f0;
      --shadow: rgba(0, 0, 0, 0.1);
      --shadow-lg: rgba(0, 0, 0, 0.05);
      --card: #ffffff;
      --success: #10b981;
      --warning: #f97316;
      --error: #ef4444;
      --info: #3b82f6;
      --radius-sm: 4px;
      --radius: 8px;
      --radius-md: 12px;
      --radius-lg: 16px;
      --transition: 0.3s ease;
      --header-height: 70px;
    }

    [data-theme="dark"] {
      --primary: #6366f1;
      --primary-dark: #4f46e5;
      --primary-light: #312e81;
      --primary-bg: #111827;
      --text: #f1f5f9;
      --text-light: #94a3b8;
      --background: #0f172a;
      --background-alt: #1e293b;
      --border: #334155;
      --shadow: rgba(0, 0, 0, 0.3);
      --shadow-lg: rgba(0, 0, 0, 0.7);
      --card: #1e293b;
    }

    /* Dark mode input enhancements */
    body.dark-theme input,
    body.dark-theme select,
    body.dark-theme textarea,
    [data-theme="dark"] input,
    [data-theme="dark"] select,
    [data-theme="dark"] textarea {
      color: #ffffff !important;
      background-color: #2a2a2a !important;
      border-color: #444 !important;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      line-height: 1.6;
      color: var(--text);
      background-color: var(--background);
      transition: background-color var(--transition), color var(--transition);
      overflow-x: hidden;
    }

    h1, h2, h3, h4, h5, h6 {
      color: var(--text);
      font-weight: 600;
      line-height: 1.3;
      margin-bottom: 0.5rem;
      transition: color var(--transition);
    }

    h1 {
      font-size: 2.25rem;
      letter-spacing: -0.025em;
    }

    h2 {
      font-size: 1.75rem;
      letter-spacing: -0.025em;
    }

    h3 {
      font-size: 1.5rem;
    }

    p {
      margin-bottom: 1rem;
      color: var(--text-light);
    }

    a {
      color: var(--primary);
      text-decoration: none;
      transition: color var(--transition);
    }

    a:hover {
      color: var(--primary-dark);
      text-decoration: underline;
    }

    /* Layout */
    .container {
      max-width: 1280px;
      margin: 0 auto;
      padding: 0 1.5rem;
    }

    .main-layout {
      padding: 2rem 0;
      min-height: calc(100vh - var(--header-height));
    }

    /* Header Styles */
    .header {
      background-color: var(--background);
      border-bottom: 1px solid var(--border);
      position: sticky;
      top: 0;
      z-index: 100;
      height: var(--header-height);
      padding: 0 1.5rem;
      transition: background-color var(--transition), border-color var(--transition);
    }

    .header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 1280px;
      margin: 0 auto;
      height: 100%;
    }

    .logo {
      display: flex;
      align-items: center;
      font-weight: 700;
      font-size: 1.5rem;
      color: var(--primary);
    }

    .logo-img {
      margin-right: 0.75rem;
      height: 2rem;
    }

    .theme-toggle {
      background: none;
      border: none;
      color: var(--text-light);
      cursor: pointer;
      font-size: 1.25rem;
      padding: 0.5rem;
      border-radius: 50%;
      transition: background-color var(--transition), color var(--transition);
    }

    .theme-toggle:hover {
      background-color: var(--primary-light);
      color: var(--primary);
    }

    /* Card and Components */
    .card {
      background-color: var(--card);
      border-radius: var(--radius);
      box-shadow: 0 4px 6px var(--shadow);
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      transition: background-color var(--transition), box-shadow var(--transition);
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.25rem;
    }

    .steps {
      display: flex;
      margin-bottom: 2rem;
      overflow-x: auto;
      padding-bottom: 0.5rem;
    }

    .step {
      display: flex;
      align-items: center;
      margin-right: 1.5rem;
      opacity: 0.7;
      transition: opacity var(--transition);
    }

    .step.active {
      opacity: 1;
    }

    .step-number {
      background-color: var(--primary-light);
      color: var(--primary);
      width: 2rem;
      height: 2rem;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      margin-right: 0.75rem;
      transition: background-color var(--transition), color var(--transition);
    }

    .step.active .step-number {
      background-color: var(--primary);
      color: white;
    }

    .step-title {
      font-weight: 500;
    }

    /* Form Elements */
    .form-group {
      margin-bottom: 1.5rem;
    }

    label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
      color: var(--text);
      transition: color var(--transition);
    }

    .input-wrapper {
      position: relative;
    }

    input, select, textarea {
      width: 100%;
      padding: 0.75rem 1rem;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      font-size: 1rem;
      color: var(--text);
      background-color: var(--background);
      transition: border-color var(--transition), background-color var(--transition);
    }

    input:focus, select:focus, textarea:focus {
      border-color: var(--primary);
      outline: none;
      box-shadow: 0 0 0 3px var(--primary-light);
    }

    .input-currency {
      position: relative;
    }

    .input-currency input {
      padding-left: 2rem;
    }

    .input-currency::before {
      content: "â‚¹";
      position: absolute;
      left: 0.75rem;
      top: 50%;
      transform: translateY(-50%);
      font-weight: 500;
      color: var(--text-light);
      z-index: 1;
    }

    /* Make currency symbol visible in dark mode */
    body.dark-theme .input-currency::before,
    [data-theme="dark"] .input-currency::before {
      color: #ffffff;
    }

    .tooltip {
      position: relative;
      display: inline-block;
      margin-left: 0.5rem;
      cursor: help;
    }

    .tooltip-icon {
      color: var(--text-light);
      background-color: var(--background-alt);
      width: 1.25rem;
      height: 1.25rem;
      border-radius: 50%;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      font-weight: bold;
    }

    .tooltip-text {
      visibility: hidden;
      position: absolute;
      width: 200px;
      background-color: var(--background-alt);
      color: var(--text);
      text-align: center;
      border-radius: var(--radius-sm);
      padding: 0.5rem;
      z-index: 1;
      bottom: 125%;
      left: 50%;
      margin-left: -100px;
      opacity: 0;
      transition: opacity var(--transition);
      box-shadow: 0 4px 6px var(--shadow);
      font-size: 0.875rem;
      font-weight: normal;
    }

    .tooltip:hover .tooltip-text {
      visibility: visible;
      opacity: 1;
    }

    /* Buttons */
    .btn {
      display: inline-block;
      padding: 0.75rem 1.5rem;
      font-weight: 500;
      text-align: center;
      border: none;
      border-radius: var(--radius);
      cursor: pointer;
      transition: background-color var(--transition), color var(--transition), transform var(--transition);
      font-size: 1rem;
    }

    .btn:hover {
      transform: translateY(-2px);
    }

    .btn:active {
      transform: translateY(0);
    }

    .btn-primary {
      background-color: var(--primary);
      color: white;
    }

    .btn-primary:hover {
      background-color: var(--primary-dark);
    }

    .btn-secondary {
      background-color: var(--secondary);
      color: white;
    }

    .btn-secondary:hover {
      background-color: var(--secondary-dark);
    }

    .btn-outline {
      background-color: transparent;
      border: 1px solid var(--primary);
      color: var(--primary);
    }

    .btn-outline:hover {
      background-color: var(--primary);
      color: white;
    }

    .btn-ghost {
      background-color: transparent;
      color: var(--text);
    }

    .btn-ghost:hover {
      background-color: var(--background-alt);
    }

    .btn-icon {
      padding: 0.5rem;
      display: inline-flex;
      align-items: center;
      justify-content: center;
    }

    .btn-icon svg {
      width: 1.25rem;
      height: 1.25rem;
    }

    .btn-lg {
      padding: 1rem 2rem;
      font-size: 1.125rem;
    }

    .btn-sm {
      padding: 0.5rem 1rem;
      font-size: 0.875rem;
    }

    /* Additional Styles for Mobile */
    @media (max-width: 768px) {
      .container {
        padding: 0 1rem;
      }

      h1 {
        font-size: 1.75rem;
      }

      h2 {
        font-size: 1.5rem;
      }
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="header-content">
      <div class="logo">
        <svg class="logo-img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 12V7H5a2 2 0 0 1 0-4h14v4"></path>
          <path d="M3 5v14a2 2 0 0 0 2 2h16v-5"></path>
          <path d="M18 12a2 2 0 0 0 0 4h4v-4Z"></path>
        </svg>
        <span>TaxSage 2025</span>
      </div>
      <div class="nav-controls">
        <button id="theme-toggle" class="theme-toggle" aria-label="Toggle dark mode">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="4"></circle>
            <path d="M12 2v2"></path>
            <path d="M12 20v2"></path>
            <path d="m4.93 4.93 1.41 1.41"></path>
            <path d="m17.66 17.66 1.41 1.41"></path>
            <path d="M2 12h2"></path>
            <path d="M20 12h2"></path>
            <path d="m6.34 17.66-1.41 1.41"></path>
            <path d="m19.07 4.93-1.41 1.41"></path>
          </svg>
        </button>
      </div>
    </div>
  </header>

  <main class="main-layout">
    <div class="container">
      <div class="app-intro card">
        <h1>Indian Tax Consultation System 2025</h1>
        <p>Plan your taxes efficiently with our advanced tools and personalized advice powered by AI.</p>
        
        <div class="features-highlight">
          <div class="feature">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 2v20"></path>
              <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
            </svg>
            <div>
              <h3>Tax Calculator</h3>
              <p>Compare old vs new tax regime to find the best option for you</p>
            </div>
          </div>
          <div class="feature">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"></circle>
              <polygon points="10 8 16 12 10 16 10 8"></polygon>
            </svg>
            <div>
              <h3>AI Tax Assistant</h3>
              <p>Get personalized tax advice from our AI assistant</p>
            </div>
          </div>
          <div class="feature">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect width="18" height="18" x="3" y="3" rx="2" ry="2"></rect>
              <line x1="3" x2="21" y1="9" y2="9"></line>
              <line x1="9" x2="9" y1="21" y2="9"></line>
            </svg>
            <div>
              <h3>Visual Reports</h3>
              <p>View tax breakdowns with clear charts and save as PDF</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Main Navigation Tabs -->
      <div class="tab-navigation">
        <button class="tab-btn active" data-tab="calculator">Tax Calculator</button>
        <button class="tab-btn" data-tab="ai-chat">AI Tax Assistant</button>
        <button class="tab-btn" data-tab="tax-tips">Tax Tips</button>
      </div>

      <!-- Tab Content Sections -->
      <div class="tab-content active" id="calculator-tab">
        <div class="card">
          <div class="card-header">
            <h2>Tax Calculator 2025</h2>
            <button class="btn btn-outline btn-sm" id="download-report">Download Report</button>
          </div>
          
          <!-- Step Navigator -->
          <div class="steps">
            <div class="step active" data-step="1">
              <div class="step-number">1</div>
              <div class="step-title">Income Details</div>
            </div>
            <div class="step" data-step="2">
              <div class="step-number">2</div>
              <div class="step-title">Deductions</div>
            </div>
            <div class="step" data-step="3">
              <div class="step-number">3</div>
              <div class="step-title">Comparison</div>
            </div>
          </div>

          <!-- Step Content -->
          <div class="step-content active" id="step-1">
            <h3>Income Details</h3>
            <p>Enter your income details for the financial year 2024-25</p>
            
            <div class="form-group">
              <label for="salary">Annual Salary 
                <div class="tooltip">
                  <span class="tooltip-icon">i</span>
                  <span class="tooltip-text">Enter your gross annual salary before any deductions</span>
                </div>
              </label>
              <div class="input-currency">
                <input type="number" id="salary" placeholder="Enter your annual salary" value="1000000">
              </div>
            </div>
            
            <div class="form-group">
              <label for="other-income">Other Income
                <div class="tooltip">
                  <span class="tooltip-icon">i</span>
                  <span class="tooltip-text">Include rental income, interest, capital gains etc.</span>
                </div>
              </label>
              <div class="input-currency">
                <input type="number" id="other-income" placeholder="Enter other income" value="0">
              </div>
            </div>
            
            <div class="buttons-row">
              <button class="btn btn-primary" id="next-step-1">Continue</button>
            </div>
          </div>
          
          <div class="step-content" id="step-2">
            <h3>Deductions</h3>
            <p>Add your eligible deductions under various sections</p>
            
            <div class="form-group">
              <label for="section-80c">Section 80C Investments
                <div class="tooltip">
                  <span class="tooltip-icon">i</span>
                  <span class="tooltip-text">PPF, ELSS, LIC, NSC, etc. (Max â‚¹1,50,000)</span>
                </div>
              </label>
              <div class="input-currency">
                <input type="number" id="section-80c" placeholder="Enter 80C investments" value="150000">
              </div>
            </div>
            
            <div class="form-group">
              <label for="section-80d">Section 80D - Health Insurance
                <div class="tooltip">
                  <span class="tooltip-icon">i</span>
                  <span class="tooltip-text">Health insurance premiums (Self: â‚¹25,000, Senior Parents: â‚¹50,000)</span>
                </div>
              </label>
              <div class="input-currency">
                <input type="number" id="section-80d" placeholder="Enter health insurance premium" value="0">
              </div>
            </div>
            
            <div class="form-group">
              <label for="hra-exemption">HRA Exemption
                <div class="tooltip">
                  <span class="tooltip-icon">i</span>
                  <span class="tooltip-text">House Rent Allowance exemption if applicable</span>
                </div>
              </label>
              <div class="input-currency">
                <input type="number" id="hra-exemption" placeholder="Enter HRA exemption" value="60000">
              </div>
            </div>
            
            <div class="form-group">
              <label for="home-loan">Home Loan Interest (Sec 24)
                <div class="tooltip">
                  <span class="tooltip-icon">i</span>
                  <span class="tooltip-text">Interest on housing loan (Max â‚¹2,00,000)</span>
                </div>
              </label>
              <div class="input-currency">
                <input type="number" id="home-loan" placeholder="Enter home loan interest" value="0">
              </div>
            </div>
            
            <div class="buttons-row">
              <button class="btn btn-ghost" id="prev-step-2">Back</button>
              <button class="btn btn-primary" id="next-step-2">Continue</button>
            </div>
          </div>
          
          <div class="step-content" id="step-3">
            <h3>Tax Regime Comparison</h3>
            <p>Compare tax liability under both regimes to find the best option for you</p>
            
            <div class="comparison-results">
              <div class="tax-charts">
                <div class="chart-container">
                  <canvas id="comparison-chart"></canvas>
                </div>
              </div>
              
              <div class="regime-cards">
                <div class="regime-card" id="old-regime-card">
                  <div class="regime-header">
                    <h4>Old Regime</h4>
                    <span class="regime-badge">With Deductions</span>
                  </div>
                  <div class="regime-details">
                    <div class="detail-row">
                      <span>Gross Income:</span>
                      <span id="old-gross-income" class="currency-value">â‚¹1,000,000</span>
                    </div>
                    <div class="detail-row">
                      <span>Total Deductions:</span>
                      <span id="old-deductions" class="currency-value">â‚¹210,000</span>
                    </div>
                    <div class="detail-row highlight">
                      <span>Taxable Income:</span>
                      <span id="old-taxable-income" class="currency-value">â‚¹790,000</span>
                    </div>
                    <div class="detail-row highlight">
                      <span>Tax Amount:</span>
                      <span id="old-tax-amount" class="currency-value">â‚¹70,500</span>
                    </div>
                    <div class="detail-row bold">
                      <span>Net Income:</span>
                      <span id="old-net-income" class="currency-value">â‚¹929,500</span>
                    </div>
                  </div>
                </div>
                
                <div class="regime-card" id="new-regime-card">
                  <div class="regime-header">
                    <h4>New Regime</h4>
                    <span class="regime-badge">Lower Rates</span>
                  </div>
                  <div class="regime-details">
                    <div class="detail-row">
                      <span>Gross Income:</span>
                      <span id="new-gross-income" class="currency-value">â‚¹1,000,000</span>
                    </div>
                    <div class="detail-row">
                      <span>Standard Deduction:</span>
                      <span id="new-deductions" class="currency-value">â‚¹50,000</span>
                    </div>
                    <div class="detail-row highlight">
                      <span>Taxable Income:</span>
                      <span id="new-taxable-income" class="currency-value">â‚¹950,000</span>
                    </div>
                    <div class="detail-row highlight">
                      <span>Tax Amount:</span>
                      <span id="new-tax-amount" class="currency-value">â‚¹75,000</span>
                    </div>
                    <div class="detail-row bold">
                      <span>Net Income:</span>
                      <span id="new-net-income" class="currency-value">â‚¹925,000</span>
                    </div>
                  </div>
                </div>
              </div>
              
              <div class="recommendation-box" id="recommendation-container">
                <div class="recommendation-header">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"></circle>
                    <path d="M12 16v-4"></path>
                    <path d="M12 8h.01"></path>
                  </svg>
                  <h3>Recommended Option</h3>
                </div>
                <div class="recommendation-content">
                  <p>Based on your inputs, we recommend choosing:</p>
                  <div class="recommended-regime" id="recommended-regime">Old Regime</div>
                  <p class="saving-text">You will save <span id="saving-amount">â‚¹4,500</span> with this option.</p>
                </div>
              </div>
              
              <div class="buttons-row">
                <button class="btn btn-ghost" id="prev-step-3">Back</button>
                <button class="btn btn-primary" id="recalculate">Recalculate</button>
                <button class="btn btn-secondary" id="download-pdf">Download PDF Report</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="tab-content" id="ai-chat-tab">
        <div class="card chat-card">
          <div class="card-header">
            <h2>AI Tax Assistant</h2>
            <button class="btn btn-outline btn-sm" id="clear-chat">Clear Chat</button>
          </div>
          
          <div class="chat-container" id="chat-container">
            <div class="chat-message ai-message">
              <div class="message-avatar">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="12" cy="12" r="10"></circle>
                  <line x1="2" x2="22" y1="12" y2="12"></line>
                  <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
                </svg>
              </div>
              <div class="message-content">
                <div class="message-header">
                  <span class="message-name">TaxSage AI</span>
                  <span class="message-time">Just now</span>
                </div>
                <div class="message-text">
                  Hello! I'm your AI tax assistant for Indian tax laws and regulations for 2025. How can I help you today?
                </div>
              </div>
            </div>
          </div>
          
          <div class="chat-input-container">
            <input type="text" id="user-input" placeholder="Ask a question about Indian tax laws...">
            <button class="btn btn-primary" id="send-message">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="22" y1="2" y2="11" x2="11"></line>
                <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
              </svg>
            </button>
          </div>
          
          <div class="popular-questions">
            <h4>Popular Questions</h4>
            <div class="question-chips">
              <button class="question-chip" data-question="What is the difference between old and new tax regime?">Old vs New Regime?</button>
              <button class="question-chip" data-question="What are the tax slabs for 2025?">Tax Slabs 2025</button>
              <button class="question-chip" data-question="How to save tax on salary income?">Tax Saving Tips</button>
              <button class="question-chip" data-question="What are Section 80C deductions?">Section 80C Guide</button>
            </div>
          </div>
        </div>
      </div>

      <div class="tab-content" id="tax-tips-tab">
        <div class="card">
          <div class="card-header">
            <h2>Tax Tips & Resources</h2>
          </div>
          
          <div class="tax-tips-container">
            <div class="accordion">
              <div class="accordion-item">
                <div class="accordion-header">
                  <h3>Tax Saving Strategies for 2025</h3>
                  <span class="accordion-icon">+</span>
                </div>
                <div class="accordion-content">
                  <p>Here are the most effective tax saving strategies for the financial year 2024-25:</p>
                  <ul>
                    <li>Maximize your Section 80C investments (â‚¹1.5 lakhs)</li>
                    <li>Invest in NPS for additional â‚¹50,000 deduction under Section 80CCD(1B)</li>
                    <li>Health insurance premiums under Section 80D</li>
                    <li>Home loan interest deduction under Section 24</li>
                    <li>Consider tax-free bonds and instruments</li>
                  </ul>
                </div>
              </div>
              
              <div class="accordion-item">
                <div class="accordion-header">
                  <h3>Understanding the New Tax Regime</h3>
                  <span class="accordion-icon">+</span>
                </div>
                <div class="accordion-content">
                  <p>The new tax regime offers lower tax rates but removes most deductions and exemptions:</p>
                  <table class="tax-table">
                    <thead>
                      <tr>
                        <th>Income Range</th>
                        <th>Tax Rate</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>â‚¹0 - â‚¹3,00,000</td>
                        <td>Nil</td>
                      </tr>
                      <tr>
                        <td>â‚¹3,00,001 - â‚¹6,00,000</td>
                        <td>5%</td>
                      </tr>
                      <tr>
                        <td>â‚¹6,00,001 - â‚¹9,00,000</td>
                        <td>10%</td>
                      </tr>
                      <tr>
                        <td>â‚¹9,00,001 - â‚¹12,00,000</td>
                        <td>15%</td>
                      </tr>
                      <tr>
                        <td>â‚¹12,00,001 - â‚¹15,00,000</td>
                        <td>20%</td>
                      </tr>
                      <tr>
                        <td>Above â‚¹15,00,000</td>
                        <td>30%</td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
              
              <div class="accordion-item">
                <div class="accordion-header">
                  <h3>Important Tax Deadlines for 2025</h3>
                  <span class="accordion-icon">+</span>
                </div>
                <div class="accordion-content">
                  <div class="deadline-list">
                    <div class="deadline-item">
                      <div class="deadline-date">July 31, 2025</div>
                      <div class="deadline-desc">Last date for filing Income Tax Return for individuals</div>
                    </div>
                    <div class="deadline-item">
                      <div class="deadline-date">March 31, 2025</div>
                      <div class="deadline-desc">Last date for making tax-saving investments for FY 2024-25</div>
                    </div>
                    <div class="deadline-item">
                      <div class="deadline-date">September 30, 2025</div>
                      <div class="deadline-desc">Last date for filing ITR with audit report</div>
                    </div>
                    <div class="deadline-item">
                      <div class="deadline-date">December 31, 2025</div>
                      <div class="deadline-desc">Last date for filing belated returns</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-copyright">
          &copy; 2025 TaxSage | Indian Tax Consultation System
        </div>
        <div class="footer-links">
          <a href="#">Privacy Policy</a>
          <a href="#">Terms of Service</a>
          <a href="#">Disclaimer</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Chart.js for tax visualizations -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
  
  <!-- Dark mode enhancement script -->
  <script src="dark-mode.js"></script>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // ======= Theme Toggle =======
      const themeToggle = document.getElementById('theme-toggle');
      const prefersDarkScheme = window.matchMedia('(prefers-color-scheme: dark)');
      
      // Check for saved theme or use system preference
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme === 'dark' || (!savedTheme && prefersDarkScheme.matches)) {
        document.body.classList.add('dark-theme');
      }
      
      themeToggle.addEventListener('click', () => {
        document.body.classList.toggle('dark-theme');
        const theme = document.body.classList.contains('dark-theme') ? 'dark' : 'light';
        localStorage.setItem('theme', theme);
      });
      
      // ======= Tab Navigation =======
      const tabBtns = document.querySelectorAll('.tab-btn');
      const tabContents = document.querySelectorAll('.tab-content');
      
      tabBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          // Remove active class from all tabs
          tabBtns.forEach(tab => tab.classList.remove('active'));
          tabContents.forEach(content => content.classList.remove('active'));
          
          // Add active class to clicked tab
          btn.classList.add('active');
          const tabId = btn.dataset.tab;
          document.getElementById(`${tabId}-tab`).classList.add('active');
        });
      });
      
      // ======= Step Navigation =======
      const stepBtns = {
        'next-step-1': { currentStep: 1, nextStep: 2 },
        'next-step-2': { currentStep: 2, nextStep: 3 },
        'prev-step-2': { currentStep: 2, nextStep: 1 },
        'prev-step-3': { currentStep: 3, nextStep: 2 },
        'recalculate': { currentStep: 3, nextStep: 1 }
      };
      
      Object.keys(stepBtns).forEach(btnId => {
        const btn = document.getElementById(btnId);
        if (btn) {
          btn.addEventListener('click', () => {
            const { currentStep, nextStep } = stepBtns[btnId];
            
            // Hide current step content
            document.getElementById(`step-${currentStep}`).classList.remove('active');
            // Show next step content
            document.getElementById(`step-${nextStep}`).classList.add('active');
            
            // Update step indicators
            document.querySelector(`.step[data-step="${currentStep}"]`).classList.remove('active');
            document.querySelector(`.step[data-step="${nextStep}"]`).classList.add('active');
            
            // If moving to step 3, calculate and display results
            if (nextStep === 3) {
              calculateTax();
              renderChart();
            }
          });
        }
      });
      
      // ======= Tax Calculator =======
      function calculateTax() {
        // Get form values
        const salary = parseFloat(document.getElementById('salary').value) || 0;
        const otherIncome = parseFloat(document.getElementById('other-income').value) || 0;
        const section80c = parseFloat(document.getElementById('section-80c').value) || 0;
        const section80d = parseFloat(document.getElementById('section-80d').value) || 0;
        const hraExemption = parseFloat(document.getElementById('hra-exemption').value) || 0;
        const homeLoan = parseFloat(document.getElementById('home-loan').value) || 0;
        
        const grossIncome = salary + otherIncome;
        
        // Calculate for old regime
        const oldRegimeDeductions = Math.min(section80c, 150000) + 
                                    Math.min(section80d, 25000) + 
                                    hraExemption + 
                                    Math.min(homeLoan, 200000);
        
        const oldTaxableIncome = Math.max(0, grossIncome - oldRegimeDeductions);
        let oldTaxAmount = calculateOldRegimeTax(oldTaxableIncome);
        
        // Add cess
        oldTaxAmount = oldTaxAmount * 1.04; // 4% cess
        
        // Calculate for new regime
        const standardDeduction = 50000;
        const newTaxableIncome = Math.max(0, grossIncome - standardDeduction);
        let newTaxAmount = calculateNewRegimeTax(newTaxableIncome);
        
        // Add cess
        newTaxAmount = newTaxAmount * 1.04; // 4% cess
        
        // Display results
        document.getElementById('old-gross-income').textContent = formatCurrency(grossIncome);
        document.getElementById('old-deductions').textContent = formatCurrency(oldRegimeDeductions);
        document.getElementById('old-taxable-income').textContent = formatCurrency(oldTaxableIncome);
        document.getElementById('old-tax-amount').textContent = formatCurrency(oldTaxAmount);
        document.getElementById('old-net-income').textContent = formatCurrency(grossIncome - oldTaxAmount);
        
        document.getElementById('new-gross-income').textContent = formatCurrency(grossIncome);
        document.getElementById('new-deductions').textContent = formatCurrency(standardDeduction);
        document.getElementById('new-taxable-income').textContent = formatCurrency(newTaxableIncome);
        document.getElementById('new-tax-amount').textContent = formatCurrency(newTaxAmount);
        document.getElementById('new-net-income').textContent = formatCurrency(grossIncome - newTaxAmount);
        
        // Recommendation
        const oldRegimeCard = document.getElementById('old-regime-card');
        const newRegimeCard = document.getElementById('new-regime-card');
        const recommendedRegime = document.getElementById('recommended-regime');
        const savingAmount = document.getElementById('saving-amount');
        
        oldRegimeCard.classList.remove('recommended');
        newRegimeCard.classList.remove('recommended');
        
        if (oldTaxAmount <= newTaxAmount) {
          oldRegimeCard.classList.add('recommended');
          recommendedRegime.textContent = 'Old Regime';
          savingAmount.textContent = formatCurrency(newTaxAmount - oldTaxAmount);
        } else {
          newRegimeCard.classList.add('recommended');
          recommendedRegime.textContent = 'New Regime';
          savingAmount.textContent = formatCurrency(oldTaxAmount - newTaxAmount);
        }
      }
      
      function calculateOldRegimeTax(income) {
        let tax = 0;
        
        if (income <= 250000) {
          tax = 0;
        } else if (income <= 500000) {
          tax = (income - 250000) * 0.05;
        } else if (income <= 1000000) {
          tax = 12500 + (income - 500000) * 0.20;
        } else {
          tax = 12500 + 100000 + (income - 1000000) * 0.30;
        }
        
        return tax;
      }
      
      function calculateNewRegimeTax(income) {
        let tax = 0;
        
        if (income <= 300000) {
          tax = 0;
        } else if (income <= 600000) {
          tax = (income - 300000) * 0.05;
        } else if (income <= 900000) {
          tax = 15000 + (income - 600000) * 0.10;
        } else if (income <= 1200000) {
          tax = 15000 + 30000 + (income - 900000) * 0.15;
        } else if (income <= 1500000) {
          tax = 15000 + 30000 + 45000 + (income - 1200000) * 0.20;
        } else {
          tax = 15000 + 30000 + 45000 + 60000 + (income - 1500000) * 0.30;
        }
        
        return tax;
      }
      
      function formatCurrency(amount) {
        return 'â‚¹' + amount.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ",");
      }
      
      // ======= Chart Rendering =======
      function renderChart() {
        const oldTaxAmount = parseFloat(document.getElementById('old-tax-amount').textContent.replace(/[â‚¹,]/g, ''));
        const newTaxAmount = parseFloat(document.getElementById('new-tax-amount').textContent.replace(/[â‚¹,]/g, ''));
        const oldNetIncome = parseFloat(document.getElementById('old-net-income').textContent.replace(/[â‚¹,]/g, ''));
        const newNetIncome = parseFloat(document.getElementById('new-net-income').textContent.replace(/[â‚¹,]/g, ''));
        
        const chartCanvas = document.getElementById('comparison-chart');
        
        // Destroy existing chart if it exists
        if (window.taxChart) {
          window.taxChart.destroy();
        }
        
        // Create new chart
        window.taxChart = new Chart(chartCanvas, {
          type: 'bar',
          data: {
            labels: ['Old Regime', 'New Regime'],
            datasets: [
              {
                label: 'Tax Amount',
                data: [oldTaxAmount, newTaxAmount],
                backgroundColor: ['rgba(220, 53, 69, 0.7)', 'rgba(220, 53, 69, 0.7)'],
                borderColor: ['rgba(220, 53, 69, 1)', 'rgba(220, 53, 69, 1)'],
                borderWidth: 1
              },
              {
                label: 'Net Income',
                data: [oldNetIncome, newNetIncome],
                backgroundColor: ['rgba(32, 201, 151, 0.7)', 'rgba(32, 201, 151, 0.7)'],
                borderColor: ['rgba(32, 201, 151, 1)', 'rgba(32, 201, 151, 1)'],
                borderWidth: 1
              }
            ]
          },
          options: {
            responsive: true,
            scales: {
              y: {
                beginAtZero: true,
                grid: {
                  color: 'rgba(200, 200, 200, 0.1)'
                }
              },
              x: {
                grid: {
                  display: false
                }
              }
            },
            plugins: {
              legend: {
                position: 'top',
              }
            }
          }
        });
      }
      
      // ======= Download PDF =======
      document.getElementById('download-pdf').addEventListener('click', function() {
        alert('PDF report generation functionality would be implemented here. This would generate a detailed PDF with all tax calculations and regime comparison.');
      });
      
      // ======= Accordion =======
      const accordionHeaders = document.querySelectorAll('.accordion-header');
      
      accordionHeaders.forEach(header => {
        header.addEventListener('click', () => {
          const accordionItem = header.parentElement;
          const accordionContent = header.nextElementSibling;
          const accordionIcon = header.querySelector('.accordion-icon');
          
          // Toggle current item
          accordionItem.classList.toggle('active');
          
          if (accordionItem.classList.contains('active')) {
            accordionContent.style.maxHeight = accordionContent.scrollHeight + 'px';
            accordionIcon.textContent = '-';
          } else {
            accordionContent.style.maxHeight = '0';
            accordionIcon.textContent = '+';
          }
        });
      });
      
      // ======= AI Chat =======
      const chatContainer = document.getElementById('chat-container');
      const userInput = document.getElementById('user-input');
      const sendButton = document.getElementById('send-message');
      const clearChatButton = document.getElementById('clear-chat');
      const questionChips = document.querySelectorAll('.question-chip');
      
      // Add event listener for send button
      sendButton.addEventListener('click', sendMessage);
      
      // Add event listener for Enter key
      userInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          sendMessage();
        }
      });
      
      // Add event listeners for question chips
      questionChips.forEach(chip => {
        chip.addEventListener('click', () => {
          userInput.value = chip.dataset.question;
          sendMessage();
        });
      });
      
      // Clear chat
      clearChatButton.addEventListener('click', () => {
        // Keep only the first AI message
        const firstMessage = chatContainer.querySelector('.chat-message');
        chatContainer.innerHTML = '';
        chatContainer.appendChild(firstMessage);
      });
      
      async function sendMessage() {
        const message = userInput.value.trim();
        if (!message) return;
        
        // Add user message to chat
        addMessageToChat('user', message);
        
        // Clear input
        userInput.value = '';
        
        // Show typing indicator
        const typingIndicator = addTypingIndicator();
        
        try {
          // Send message to API
          const response = await fetch('/api/chat', {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({ message })
          });
          
          if (!response.ok) {
            throw new Error('Network response was not ok');
          }
          
          const data = await response.json();
          
          // Remove typing indicator
          typingIndicator.remove();
          
          // Add AI response to chat
          addMessageToChat('ai', data.response);
        } catch (error) {
          console.error('Error:', error);
          
          // Remove typing indicator
          typingIndicator.remove();
          
          // Add error message to chat
          addMessageToChat('ai', 'Sorry, I encountered an error while processing your request. Please try again later.');
        }
        
        // Scroll to bottom
        chatContainer.scrollTop = chatContainer.scrollHeight;
      }
      
      function addMessageToChat(type, text) {
        const messageDiv = document.createElement('div');
        messageDiv.className = `chat-message ${type}-message`;
        
        // Format current time
        const now = new Date();
        const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        
        // Set avatar and name based on message type
        let avatar, name;
        if (type === 'user') {
          avatar = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
            <circle cx="12" cy="7" r="4"></circle>
          </svg>`;
          name = 'You';
        } else {
          avatar = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="2" x2="22" y1="12" y2="12"></line>
            <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
          </svg>`;
          name = 'TaxSage AI';
        }
        
        messageDiv.innerHTML = `
          <div class="message-avatar">${avatar}</div>
          <div class="message-content">
            <div class="message-header">
              <span class="message-name">${name}</span>
              <span class="message-time">${timeString}</span>
            </div>
            <div class="message-text">${text}</div>
          </div>
        `;
        
        chatContainer.appendChild(messageDiv);
        return messageDiv;
      }
      
      function addTypingIndicator() {
        const typingDiv = document.createElement('div');
        typingDiv.className = 'chat-message ai-message typing';
        
        typingDiv.innerHTML = `
          <div class="message-avatar">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="2" x2="22" y1="12" y2="12"></line>
              <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
            </svg>
          </div>
          <div class="message-content">
            <div class="message-header">
              <span class="message-name">TaxSage AI</span>
              <span class="message-time">Typing...</span>
            </div>
            <div class="message-text">
              <div class="typing-indicator">
                <span></span>
                <span></span>
                <span></span>
              </div>
            </div>
          </div>
        `;
        
        chatContainer.appendChild(typingDiv);
        return typingDiv;
      }
      
      // Initialize with step 1 active
      document.querySelector('.step[data-step="1"]').classList.add('active');
      document.getElementById('step-1').classList.add('active');
    });
  </script>
</body>
</html> 